---
phase: 03-flagship-pages
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/styles/globals.css
  - src/components/sections/SectionWrapper.tsx
  - src/components/sections/SectionHeader.tsx
  - src/components/sections/BentoGrid.tsx
  - src/components/animations/CountUp.tsx
  - src/components/animations/ParallaxLayer.tsx
  - src/components/animations/TextReveal.tsx
  - src/components/sections/home/HeroSection.tsx
  - src/components/sections/home/ServicesPreview.tsx
  - src/app/[locale]/page.tsx
  - src/messages/ro.json
  - src/messages/en.json
autonomous: true
requirements:
  - PAGE-01
  - DSGN-02
  - DSGN-03
  - DSGN-04
  - DSGN-06
  - DSGN-08

must_haves:
  truths:
    - "The homepage hero headline animates in with word-level stagger on page load"
    - "The services preview shows 6 service cards in a bento grid with hover micro-interactions"
    - "Sections alternate between dark and light backgrounds with hard cuts (no gradient bleed)"
    - "All scroll animations fire once and stay revealed (no replay on re-enter)"
    - "The hero has a brand glow parallax effect on desktop that disables on mobile"
  artifacts:
    - path: "src/components/sections/SectionWrapper.tsx"
      provides: "Section theming via data-theme attribute"
      contains: "data-theme"
    - path: "src/components/sections/SectionHeader.tsx"
      provides: "Reusable overline + heading + description pattern"
      contains: "overline"
    - path: "src/components/sections/BentoGrid.tsx"
      provides: "Asymmetric CSS Grid layout for cards"
      contains: "grid"
    - path: "src/components/animations/CountUp.tsx"
      provides: "GSAP-powered number count-up animation"
      contains: "useGSAP"
    - path: "src/components/animations/ParallaxLayer.tsx"
      provides: "GSAP ScrollTrigger scrub parallax wrapper"
      contains: "scrub"
    - path: "src/components/animations/TextReveal.tsx"
      provides: "Extended with variant='word' support for hero kinetic typography"
      contains: "words"
    - path: "src/components/sections/home/HeroSection.tsx"
      provides: "Hero section with kinetic headline, CTAs, scroll indicator"
      contains: "TextReveal"
    - path: "src/components/sections/home/ServicesPreview.tsx"
      provides: "Bento grid of 6 service cards with hover effects"
      contains: "BentoGrid"
  key_links:
    - from: "src/components/sections/SectionWrapper.tsx"
      to: "src/styles/globals.css"
      via: "data-theme attribute matching CSS selectors"
      pattern: "data-theme"
    - from: "src/components/sections/home/HeroSection.tsx"
      to: "src/components/animations/TextReveal.tsx"
      via: "variant='word' prop for word-level stagger"
      pattern: "variant.*word"
    - from: "src/app/[locale]/page.tsx"
      to: "src/components/sections/home/"
      via: "imports HeroSection, ServicesPreview"
      pattern: "import.*HeroSection|ServicesPreview"
---

<objective>
Build the foundation section components (SectionWrapper, SectionHeader, BentoGrid, CountUp, ParallaxLayer) and implement the Homepage Hero and Services Preview sections with full animations.

Purpose: Establish the reusable section component system and deliver the most impactful homepage sections first — the hero with kinetic typography and the services bento grid. These components are reused by all subsequent plans.

Output: Working homepage with animated hero (word-level stagger) and services preview (bento grid with hover interactions). Reusable section components for Plans 02 and 03.
</objective>

<execution_context>
@/Users/mihaigrigore/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mihaigrigore/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@design-system/pages/home.md
@design-system/MASTER.md
@design-system/components.md
@design-system/tokens.css
@src/styles/globals.css
@src/components/animations/TextReveal.tsx
@src/components/animations/ScrollReveal.tsx
@src/components/layout/Container.tsx
@src/app/[locale]/page.tsx
@src/messages/ro.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Import tokens.css, add data-theme CSS, and build foundation section components</name>
  <files>
    src/styles/globals.css
    src/components/sections/SectionWrapper.tsx
    src/components/sections/SectionHeader.tsx
    src/components/sections/BentoGrid.tsx
    src/components/animations/CountUp.tsx
    src/components/animations/ParallaxLayer.tsx
    src/components/animations/TextReveal.tsx
  </files>
  <action>
    **1. Import tokens.css into globals.css:**
    Add `@import "../../design-system/tokens.css";` after the existing imports in `src/styles/globals.css`. The tokens.css file already contains `[data-theme]` selectors for dark/light/burgundy — importing it brings section theming to the project. Verify the relative path resolves from `src/styles/` to the project root `design-system/`.

    **2. Create SectionWrapper component (`src/components/sections/SectionWrapper.tsx`):**
    - Props: `children`, `theme` ('dark' | 'light' | 'light-muted' | 'burgundy'), `className?`, `id?`, `hero?` (boolean, default false for larger padding).
    - Renders `<section>` with `data-theme={theme}` attribute.
    - Uses `cn()` for className merging.
    - Wraps children in `<Container>`.
    - Hero sections: `py-20 md:py-32`. Regular sections: `py-16 md:py-20 lg:py-24`.
    - Background and text colors come from `[data-theme]` CSS in tokens.css — no need for inline color styles.
    - No 'use client' needed — this is a server component.

    **3. Create SectionHeader component (`src/components/sections/SectionHeader.tsx`):**
    - Props: `overline?` (string), `heading` (string), `description?` (string), `align?` ('left' | 'center', default 'left'), `className?`, `headingAs?` ('h1' | 'h2' | 'h3', default 'h2').
    - Overline: 12px, uppercase, letter-spacing 0.12em, `text-[var(--section-text-muted)]`.
    - Heading: Uses `headingAs` tag, Glacial Indifference Bold (inherits from base layer), responsive sizes (use Tailwind `text-3xl md:text-4xl lg:text-5xl`).
    - Description: `text-lg`, `text-[var(--section-text-muted)]`, max-w-2xl.
    - Wrap in ScrollReveal for scroll-triggered animation. Import ScrollReveal from animations.
    - 'use client' not needed — ScrollReveal handles its own client directive.

    **4. Create BentoGrid component (`src/components/sections/BentoGrid.tsx`):**
    - Props: `children` (React.ReactNode), `columns?` (2 | 3 | 4, default 3), `className?`.
    - CSS Grid with responsive columns: `grid-cols-1 sm:grid-cols-2 lg:grid-cols-{columns}`.
    - Gap: `gap-6` (24px per spec).
    - Each child should use `data-animate="card"` for stagger animation targeting.
    - 'use client' directive needed for useGSAP stagger animation.
    - In `useGSAP`, query `[data-animate="card"]` children and animate with: `y: 40, opacity: 0, duration: 0.5, stagger: 0.08, ease: 'power2.out'`, ScrollTrigger `start: 'top 85%'`, `toggleActions: 'play none none none'`.
    - Wrap in `gsap.matchMedia()` for reduced motion (show immediately if reduced).

    **5. Create CountUp component (`src/components/animations/CountUp.tsx`):**
    - 'use client' directive.
    - Props: `end` (number), `suffix?` (string, default ''), `duration?` (number, default 2), `className?`.
    - Use `useRef<HTMLSpanElement>` for the display element and `useRef<{ value: number }>` for the counter object.
    - In `useGSAP` with `gsap.matchMedia()`:
      - `(prefers-reduced-motion: no-preference)`: `gsap.to(counterRef, { value: end, duration, ease: 'power2.out', snap: { value: 1 }, scrollTrigger: { trigger: ref, start: 'top 85%', toggleActions: 'play none none none' }, onUpdate: set textContent })`.
      - `(prefers-reduced-motion: reduce)`: Set textContent to `${end}${suffix}` immediately.
    - Initial render: `<span ref={ref}>0{suffix}</span>`.
    - Import gsap and useGSAP from `@/lib/gsap` (never directly from gsap).

    **6. Create ParallaxLayer component (`src/components/animations/ParallaxLayer.tsx`):**
    - 'use client' directive.
    - Props: `children`, `speed?` (number, default 0.3), `className?`.
    - Uses `useGSAP` with `gsap.matchMedia()`.
    - Only animates on `(min-width: 1024px) and (prefers-reduced-motion: no-preference)`.
    - `gsap.to(ref, { y: () => window.innerHeight * speed * -1, ease: 'none', scrollTrigger: { trigger: ref, start: 'top bottom', end: 'bottom top', scrub: 1 } })`.
    - Render: `<div ref={ref} className={cn('pointer-events-none', className)}>{children}</div>`.

    **7. Extend TextReveal with word-level variant:**
    - Add `variant?: 'char' | 'word'` prop (default 'char' for backward compatibility).
    - Add `trigger?: 'scroll' | 'load'` prop (default 'scroll'). When 'load', omit ScrollTrigger — animation fires on mount.
    - When `variant === 'word'`: use `SplitText.create(el, { type: 'words', autoSplit: true })`, animate `self.words` with stagger (default 0.08 for words vs 0.025 for chars).
    - When `variant === 'char'`: existing behavior unchanged.
    - When `trigger === 'load'`: no scrollTrigger in the gsap.from — fires immediately on mount.
    - User locked: hero kinetic typography MUST be word-level, not character-level.
  </action>
  <verify>
    - `npm run build` completes without errors.
    - All 7 files exist with correct TypeScript types (no `any`).
    - `grep -r "data-theme" src/components/sections/SectionWrapper.tsx` returns matches.
    - `grep "variant" src/components/animations/TextReveal.tsx` shows word/char variant support.
    - `grep "tokens.css" src/styles/globals.css` confirms import.
  </verify>
  <done>
    SectionWrapper renders with data-theme attribute, SectionHeader renders overline + heading + description, BentoGrid renders responsive CSS grid with stagger animation, CountUp animates numbers on scroll, ParallaxLayer applies scrub parallax on desktop only, TextReveal supports both 'char' and 'word' variants with 'scroll' and 'load' triggers. tokens.css is imported into globals.css.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build Homepage Hero and Services Preview sections with full i18n content</name>
  <files>
    src/components/sections/home/HeroSection.tsx
    src/components/sections/home/ServicesPreview.tsx
    src/app/[locale]/page.tsx
    src/messages/ro.json
    src/messages/en.json
  </files>
  <action>
    **1. Create HeroSection (`src/components/sections/home/HeroSection.tsx`):**
    - 'use client' directive (uses animations and useTranslations).
    - Uses `useTranslations('home')` for all content.
    - Wrapped in `SectionWrapper` with `theme="dark"` and `hero={true}`.
    - Layout: Full viewport height (`min-h-screen flex items-center`).
    - Content structure (centered on desktop, left-aligned on mobile):
      - Overline: "WEB . ADS . AI . MEDIA" — `t('hero.overline')`, 12px uppercase, letter-spacing 0.12em, text Grey. Fades up with ScrollReveal (or simple gsap.from with 0ms delay since it's above fold).
      - Headline: `t('hero.headline')` — Use `TextReveal` with `variant="word"` and `trigger="load"`, rendered as `<h1>`, `text-[2.75rem] md:text-[4rem] lg:text-[5rem]` (responsive display-xl per tokens.css mobile/desktop sizes), font-bold.
      - Subheading: `t('hero.subheading')` — Red Hat Display (`font-subheading`), text Grey, `text-lg md:text-xl`, max-w-2xl. Animated with gsap.from fade-up with 200ms delay after mount.
      - CTAs: Two buttons side by side on desktop, stacked on mobile.
        - Primary: `t('hero.cta.primary')` — Link to `/servicii`. Grey bg, Black text (accent variant button). Include ArrowRight icon from lucide-react.
        - Secondary: `t('hero.cta.secondary')` — Link to `/contact`. Outline variant, white border.
        - Animated with gsap.from fade-up with 400ms delay after mount.
      - Scroll indicator: ChevronDown icon from lucide-react at bottom of hero, animated with GSAP infinite y bounce (`gsap.to(el, { y: 10, repeat: -1, yoyo: true, duration: 1.5, ease: 'power1.inOut' })`).
    - Background: Solid dark (`#262523` from data-theme="dark") with a subtle radial glow positioned top-center using ParallaxLayer wrapping a div with `background: var(--ds-gradient-brand-glow)`, `w-[600px] h-[600px]`, `opacity-30`, centered absolutely.
    - All animations use gsap.matchMedia for prefers-reduced-motion.
    - Use `Link` from `@/i18n/navigation` for CTA buttons (locale-aware routing).

    **2. Create ServicesPreview (`src/components/sections/home/ServicesPreview.tsx`):**
    - 'use client' directive.
    - Uses `useTranslations('home')`.
    - Wrapped in `SectionWrapper` with `theme="dark"`.
    - `SectionHeader` with overline: `t('services.overline')`, heading: `t('services.heading')`, description: `t('services.description')`, align: 'left'.
    - 6 service cards in `BentoGrid` with `columns={3}`.
    - Each card: `data-animate="card"` attribute for BentoGrid stagger.
      - Card styling: `bg-[var(--section-card-bg)]` (dark-elevated), `rounded-xl`, `p-6 md:p-8`, `border border-[var(--section-border)]`.
      - Icon: From lucide-react (Code, Target, Share2, Play, Search, Lightbulb — or closest matches for: browser code, target bullseye, social nodes, play musical, search chart, lightbulb). Size 48px, `text-[var(--section-text-muted)]`.
      - Title: `<h4>` with `text-lg font-bold text-[var(--section-text)]`.
      - Description: `text-sm text-[var(--section-text-muted)]`.
      - Link arrow: ArrowRight icon, positioned bottom-right or after description. Styled in Burgundy on hover.
      - Hover micro-interaction (DSGN-06): CSS transition — `hover:translate-y-[-4px] hover:shadow-[var(--ds-shadow-burgundy)] transition-all duration-300`. Use Tailwind utilities, no JS needed for this.
      - Each card wraps content in `Link` from `@/i18n/navigation` to the respective service page.
    - Service data: Map icon names from i18n (or define a static array with icon component + i18n key pairs). Services: web, google-ads, facebook-ads, tiktok-ads, seo, consultanta.
    - Below grid: Ghost button "Vezi toate serviciile" → `/servicii`. Use `t('services.cta')`.

    **3. Replace existing homepage placeholder (`src/app/[locale]/page.tsx`):**
    - Remove ALL existing placeholder content (color swatches, animation demo, typography demo, ColorSwatch component).
    - Keep the async HomePage wrapper with `setRequestLocale`.
    - Inner `HomePageContent` component renders `<main>` wrapping:
      - `<HeroSection />`
      - `<ServicesPreview />`
      - (Plans 02 will add StatsSection, Testimonials, CTASection, Newsletter below)
    - Change `useTranslations('HomePage')` to `useTranslations('home')` (new namespace per page spec).

    **4. Update i18n content (`src/messages/ro.json` and `src/messages/en.json`):**
    - Replace the existing `HomePage` namespace with `home` namespace.
    - Add all keys from the homepage page spec's "Content Keys" section:
      - `home.hero.overline`: "WEB . ADS . AI . MEDIA"
      - `home.hero.headline`: "Agentie Digitala Full-Service din Bucuresti" (RO) / "Full-Service Digital Agency in Bucharest" (EN)
      - `home.hero.subheading`: "Transformam viziunea ta in rezultate digitale masurabile. Web. Ads. AI. Media." (RO) / English equivalent
      - `home.hero.cta.primary`: "Descopera Serviciile" (RO) / "Discover Our Services" (EN)
      - `home.hero.cta.secondary`: "Contacteaza-ne" (RO) / "Contact Us" (EN)
      - `home.services.overline`: "SERVICII" / "SERVICES"
      - `home.services.heading`: "Solutii Complete pentru Afacerea Ta" / "Complete Solutions for Your Business"
      - `home.services.description`: Full description from spec
      - `home.services.items`: Array of 6 objects with `title` and `description` for each service (RO and EN)
      - `home.services.cta`: "Vezi toate serviciile" / "View all services"
    - Also add stub keys for sections built in Plan 02 (stats, about, testimonials, cta, newsletter) so the namespace is complete — use the exact content from the page spec for both RO and EN.
    - Keep all existing non-HomePage keys (header, navigation, footer, social) unchanged.
  </action>
  <verify>
    - `npm run build` completes without errors.
    - `npm run dev` — visiting `http://localhost:3000/ro/` shows hero with animated headline and services grid.
    - No console errors about missing translation keys.
    - Hero headline uses word-level stagger animation (visually verify words animate as blocks).
    - Service cards show hover lift effect.
    - Mobile viewport (375px): Hero headline is smaller, CTAs stack vertically, services show 1 column.
  </verify>
  <done>
    Homepage renders Hero section with word-level kinetic typography on load, overline, subheading, dual CTAs (Servicii + Contact), scroll indicator, and brand glow parallax. Services Preview shows 6 cards in a 3-column bento grid with stagger fade-up animation and hover micro-interactions. All content is bilingual (RO/EN) via next-intl. The existing placeholder homepage is fully replaced.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` completes with zero errors
2. Homepage hero headline animates with word-level stagger on page load
3. Services preview shows 6 cards in bento grid with hover lift + shadow
4. Dark/light section theming works via data-theme attribute
5. All i18n keys resolve in both /ro/ and /en/ locales
6. Mobile responsive: hero scales down, cards stack to single column
7. Reduced motion: animations disabled, content shown immediately
</verification>

<success_criteria>
- Homepage Hero and Services Preview are fully functional with animations
- 7 new reusable components created (SectionWrapper, SectionHeader, BentoGrid, CountUp, ParallaxLayer, HeroSection, ServicesPreview)
- TextReveal extended with word variant
- tokens.css imported into globals.css
- Bilingual content complete for hero and services sections
- Build passes with zero errors
</success_criteria>

<output>
After completion, create `.planning/phases/03-flagship-pages/03-01-SUMMARY.md`
</output>
