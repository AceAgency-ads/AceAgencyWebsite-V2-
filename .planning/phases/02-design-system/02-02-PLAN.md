---
phase: 02-design-system
plan: 02
type: execute
wave: 2
depends_on:
  - "02-01"
files_modified:
  - src/lib/gsap.ts
  - src/lib/device.ts
  - src/components/layout/Header.tsx
  - src/components/layout/MenuOverlay.tsx
  - src/components/layout/Footer.tsx
  - src/components/animations/TextReveal.tsx
  - src/styles/globals.css
  - src/messages/ro.json
  - src/messages/en.json
autonomous: true
requirements:
  - DSGN-10
  - FUNC-04
  - FUNC-05

must_haves:
  truths:
    - "Header renders with logo, hamburger menu button, and CTA button on all screen sizes"
    - "Clicking the hamburger opens a fullscreen overlay with navigation links animated via character-level SplitText stagger"
    - "Header hides smoothly when scrolling down and reappears when scrolling up"
    - "Locale switcher (RO/EN) is accessible within the menu overlay and switching locale closes the menu"
    - "Footer renders with logo, division badges, contact info, social links (LinkedIn, Instagram, Facebook), quick nav, newsletter form UI, and legal links"
    - "Footer elements animate in with staggered scroll-triggered reveals"
    - "TextReveal component splits text into characters and animates with GSAP SplitText stagger on scroll"
  artifacts:
    - path: "src/components/layout/Header.tsx"
      provides: "Minimal header bar with logo, hamburger, CTA"
      contains: "Header"
    - path: "src/components/layout/MenuOverlay.tsx"
      provides: "Fullscreen overlay menu with SplitText animation"
      contains: "MenuOverlay"
    - path: "src/components/layout/Footer.tsx"
      provides: "Full footer with social links, divisions, newsletter"
      contains: "Footer"
    - path: "src/components/animations/TextReveal.tsx"
      provides: "SplitText character stagger animation wrapper"
      contains: "TextReveal"
    - path: "src/lib/gsap.ts"
      provides: "GSAP with SplitText registered"
      contains: "SplitText"
    - path: "src/lib/device.ts"
      provides: "Touch device detection utility"
      contains: "isTouchDevice"
  key_links:
    - from: "src/components/layout/Header.tsx"
      to: "src/components/layout/MenuOverlay.tsx"
      via: "isOpen state passed as prop"
      pattern: "isOpen"
    - from: "src/components/layout/MenuOverlay.tsx"
      to: "src/lib/gsap.ts"
      via: "SplitText import for character animation"
      pattern: "import.*SplitText.*from.*@/lib/gsap"
    - from: "src/components/layout/MenuOverlay.tsx"
      to: "src/components/layout/LocaleSwitcher.tsx"
      via: "LocaleSwitcher rendered inside overlay"
      pattern: "LocaleSwitcher"
    - from: "src/components/layout/Footer.tsx"
      to: "src/components/animations/ScrollReveal.tsx"
      via: "Footer sections wrapped in ScrollReveal"
      pattern: "ScrollReveal"
    - from: "src/app/[locale]/layout.tsx"
      to: "src/components/layout/Header.tsx"
      via: "Header rendered in layout"
      pattern: "Header"
---

<objective>
Build the Header (with fullscreen overlay menu, scroll hide/show, locale switcher), Footer (with social links, divisions, newsletter UI), and TextReveal animation wrapper — the shared layout components every page needs.

Purpose: These components establish the site's persistent navigation, branding, and animation patterns. The Header and Footer wrap every page via the layout. TextReveal provides the premium typographic animation used on headings throughout the site.

Output: Header.tsx, MenuOverlay.tsx, Footer.tsx, TextReveal.tsx, updated gsap.ts with SplitText, device.ts utility
</objective>

<execution_context>
@/Users/mihaigrigore/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mihaigrigore/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-design-system/02-CONTEXT.md
@.planning/phases/02-design-system/02-RESEARCH.md
@.planning/phases/02-design-system/02-01-SUMMARY.md
@design-system/MASTER.md
@design-system/components.md
@src/lib/gsap.ts
@src/components/layout/LocaleSwitcher.tsx
@src/components/animations/ScrollReveal.tsx
@src/components/layout/Container.tsx
@src/app/[locale]/layout.tsx
@src/styles/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Register SplitText, create TextReveal wrapper, and device utility</name>
  <files>
    src/lib/gsap.ts
    src/lib/device.ts
    src/components/animations/TextReveal.tsx
  </files>
  <action>
**1. Update `src/lib/gsap.ts`** — Add SplitText registration:

```typescript
import { SplitText } from 'gsap/SplitText';
gsap.registerPlugin(useGSAP, ScrollTrigger, SplitText);
export { gsap, useGSAP, ScrollTrigger, SplitText };
```

Keep existing defaults and comments. SplitText ships free with gsap@3.14.2 (no new install needed).

**2. Create `src/lib/device.ts`** — Touch device detection utility:

```typescript
export function isTouchDevice(): boolean {
  if (typeof window === 'undefined') return false;
  return 'ontouchstart' in window || window.matchMedia('(hover: none)').matches;
}
```

**3. Create `src/components/animations/TextReveal.tsx`** — SplitText character stagger animation:

- 'use client' directive
- Accept props: children, className, as (HTML element tag, default 'div'), stagger (default 0.025), duration (default 0.5), triggerStart (default 'top 85%')
- Use useGSAP with gsap.matchMedia for prefers-reduced-motion wrapping
- Inside the matchMedia callback, use SplitText.create with type: 'chars', autoSplit: true
- In the onSplit callback, create a gsap.from animation on self.chars with y: '130%', opacity: 0, duration, stagger, ease: 'power1.inOut'
- Attach a ScrollTrigger to the animation: trigger is containerRef, start is triggerStart, toggleActions: 'play none none none'
- Render the element using the `as` prop (default div) with ref and className
- Per RESEARCH.md: autoSplit: true handles font-swap re-splitting automatically
  </action>
  <verify>
```bash
cd /Users/mihaigrigore/workspace/AceAgencyWebsite-V2- && npx tsc --noEmit 2>&1 | head -30
```
Verify no TypeScript errors. Verify SplitText is exported from gsap.ts.
  </verify>
  <done>
src/lib/gsap.ts exports SplitText alongside gsap, useGSAP, ScrollTrigger. src/lib/device.ts exports isTouchDevice. src/components/animations/TextReveal.tsx renders text with character-level split animation on scroll, wrapped in prefers-reduced-motion check.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build Header with scroll hide/show and fullscreen MenuOverlay</name>
  <files>
    src/components/layout/Header.tsx
    src/components/layout/MenuOverlay.tsx
    src/messages/ro.json
    src/messages/en.json
  </files>
  <action>
**1. Create `src/components/layout/Header.tsx`:**

- 'use client' directive
- Minimal bar layout per CONTEXT.md: logo (left), hamburger button + CTA button (right)
- Logo: text-based placeholder "ACE" in Glacial Indifference Bold (per RESEARCH.md Open Question 1). Create the component to accept either text or an SVG image prop for future replacement. Link logo to `/${locale}/`.
- Hamburger button: toggles isOpen state, 48x48px min tap target. Use an animated hamburger icon (two lines that morph to X when open — pure CSS or GSAP).
- CTA button: "Contacteaza-ne" (RO) / "Contact us" (EN) — use `useTranslations('header')` from next-intl. Link to `/${locale}/contact`. Style as primary button (Electric Violet bg, white text).
- Scroll hide/show per RESEARCH.md Pattern 1: use ScrollTrigger.create with onUpdate self.direction. Create a gsap.from animation with yPercent: -100, paused: true, duration: 0.3, ease: 'power1.inOut'. Play on scroll up (direction === -1), reverse on scroll down.
- Glass morphism on scroll per RESEARCH.md discretionary recommendation: transparent initially, transition to backdrop-blur-md bg-background/80 when scrolled past ~50px. Use ScrollTrigger to detect scroll position.
- Position: fixed top-0, z-50, w-full
- When menu overlay is open, disable the scroll hide/show behavior (header stays visible)
- Pass isOpen and setIsOpen (or toggle function) to MenuOverlay as props

**2. Create `src/components/layout/MenuOverlay.tsx`:**

- 'use client' directive
- Accept props: isOpen (boolean), onClose (function)
- Fullscreen overlay per CONTEXT.md: fixed inset-0, z-40, bg-background
- Animation per RESEARCH.md Pattern 4: use a GSAP timeline stored in a ref (not state). Step 1: overlay slides in via clipPath animation (clipPath: 'inset(0%)' from 'inset(100% 0 0 0)'). Step 2: nav links appear with SplitText character stagger.
- Use useGSAP with dependencies: [isOpen]. Play timeline when isOpen=true, reverse when false.
- Navigation links (use useTranslations('navigation')):
  - Acasa / Home → /
  - Despre noi / About → /despre-noi
  - Servicii / Services → /servicii
  - Contact → /contact
- Each nav link rendered as a large heading-size text element (font-heading, text-4xl md:text-6xl) with className "nav-link"
- SplitText applied to each nav link in the timeline
- Include the existing LocaleSwitcher component inside the overlay (import from @/components/layout/LocaleSwitcher)
- Close menu on locale switch: listen for pathname changes via usePathname from @/i18n/navigation. When pathname or locale changes, call onClose.
- Close menu on nav link click: call onClose, then navigate
- Call ScrollTrigger.refresh() after overlay close animation completes (per RESEARCH.md Pitfall 4)
- Prevent body scroll when overlay is open: set document.body.style.overflow = 'hidden' when open, remove when closed (in useGSAP cleanup)

**3. Add translation keys** to ro.json and en.json:

```json
"header": {
  "cta": "Contacteaza-ne" / "Contact us",
  "menuOpen": "Deschide meniul" / "Open menu",
  "menuClose": "Inchide meniul" / "Close menu"
},
"navigation": {
  "home": "Acasa" / "Home",
  "about": "Despre noi" / "About",
  "services": "Servicii" / "Services",
  "contact": "Contact" / "Contact"
}
```

Use the existing pattern of extending the JSON files (don't overwrite existing keys).
  </action>
  <verify>
```bash
cd /Users/mihaigrigore/workspace/AceAgencyWebsite-V2- && npx tsc --noEmit 2>&1 | head -30
npm run build 2>&1 | tail -20
```
Verify TypeScript compiles. Verify build succeeds. Check that Header and MenuOverlay are valid components.
  </verify>
  <done>
Header.tsx renders with logo placeholder, hamburger, and CTA. It hides on scroll down and shows on scroll up via ScrollTrigger. MenuOverlay opens as fullscreen with SplitText character stagger on nav links. LocaleSwitcher is inside the overlay. Locale change closes the overlay. Translation keys exist in both ro.json and en.json.
  </done>
</task>

<task type="auto">
  <name>Task 3: Build Footer with social links, divisions, newsletter UI, and wire layout</name>
  <files>
    src/components/layout/Footer.tsx
    src/app/[locale]/layout.tsx
    src/styles/globals.css
    src/messages/ro.json
    src/messages/en.json
  </files>
  <action>
**1. Create `src/components/layout/Footer.tsx`:**

- 'use client' directive (uses useTranslations and ScrollReveal)
- Addifico-style full content layout per CONTEXT.md:
  - **Row 1 (top):** Logo (text "ACE" placeholder, same as Header), tagline from translations, division badges as horizontal pill/badge row (AceWeb, AceAds, AceAI, AceMedia — styled as subtle rounded pills)
  - **Row 2 (grid):** 3-4 column responsive grid:
    - Column 1: Office address (Bucharest, Romania), phone, email — use translations
    - Column 2: Quick nav links (same pages as MenuOverlay navigation links)
    - Column 3: Newsletter signup form UI (email input + submit button + GDPR opt-in checkbox). Build the form UI only — no Server Action wiring yet (that's Phase 5 FUNC-02). The form should have an onSubmit prop or render with a placeholder that shows a "coming soon" toast or does nothing.
    - Column 4 (or part of column 1): Social links using Lucide icons per RESEARCH.md Footer Social Links Pattern — LinkedIn, Instagram, Facebook with target="_blank", rel="noopener noreferrer", aria-labels from translations, 48x48px tap targets
  - **Row 3 (bottom):** Copyright "© 2026 AceAgency. Toate drepturile rezervate." / "All rights reserved." + legal links (Privacy Policy, Cookie Policy, Terms — placeholder href for now, actual pages built in Phase 6)
- Wrap each major section in ScrollReveal for staggered scroll-triggered reveal animation per CONTEXT.md
- Use Container for consistent width
- Dark background section (bg-background with light text)

**2. Update `src/app/[locale]/layout.tsx`:**

- Remove the existing inline `<header>` with LocaleSwitcher
- Import Header from @/components/layout/Header
- Import Footer from @/components/layout/Footer
- Render Header before {children} and Footer after {children}
- Keep NextIntlClientProvider wrapping everything

**3. Update `src/styles/globals.css`:**

- Add the custom cursor CSS rule for hiding default cursor on desktop (per RESEARCH.md):
```css
@media (hover: hover) {
  body.custom-cursor-active {
    cursor: none;
  }
  body.custom-cursor-active a,
  body.custom-cursor-active button {
    cursor: none;
  }
}
```

**4. Add translation keys** to ro.json and en.json:

```json
"footer": {
  "tagline": "Agentia ta de marketing digital din Bucuresti" / "Your digital marketing agency from Bucharest",
  "address": "Bucuresti, Romania" / "Bucharest, Romania",
  "phone": "+40 XXX XXX XXX",
  "email": "contact@aceagency.ro",
  "newsletter": {
    "title": "Newsletter" / "Newsletter",
    "placeholder": "Adresa ta de email" / "Your email address",
    "submit": "Aboneaza-te" / "Subscribe",
    "gdpr": "Sunt de acord cu prelucrarea datelor personale" / "I agree to the processing of personal data"
  },
  "copyright": "© 2026 AceAgency. Toate drepturile rezervate." / "© 2026 AceAgency. All rights reserved.",
  "divisions": {
    "web": "AceWeb",
    "ads": "AceAds",
    "ai": "AceAI",
    "media": "AceMedia"
  },
  "legal": {
    "privacy": "Politica de confidentialitate" / "Privacy Policy",
    "cookies": "Politica de cookie-uri" / "Cookie Policy",
    "terms": "Termeni si conditii" / "Terms of Service"
  }
},
"social": {
  "linkedin": "LinkedIn",
  "instagram": "Instagram",
  "facebook": "Facebook"
}
```

Reference the design-system/MASTER.md and design-system/components.md for styling decisions. If those files specify particular spacing, colors, or component patterns for Header/Footer, follow them. Fall back to CONTEXT.md locked decisions if design system is silent.
  </action>
  <verify>
```bash
cd /Users/mihaigrigore/workspace/AceAgencyWebsite-V2- && npx tsc --noEmit 2>&1 | head -30
npm run build 2>&1 | tail -20
```
Verify TypeScript compiles. Verify build succeeds with Header and Footer in layout. Verify social links have proper aria-labels and target="_blank".
  </verify>
  <done>
Footer.tsx renders with logo, tagline, divisions, address, social links (LinkedIn, Instagram, Facebook), quick nav, newsletter form UI, copyright, and legal links. Layout.tsx renders Header before children and Footer after. All footer sections use ScrollReveal for staggered animation. Translation keys in both ro.json and en.json. Build passes.
  </done>
</task>

</tasks>

<verification>
- `npm run build` completes with zero errors
- Header renders with logo, hamburger, CTA on the page
- Header hides on scroll down, shows on scroll up
- Hamburger opens fullscreen overlay with SplitText-animated nav links
- LocaleSwitcher works inside the overlay; switching locale closes the menu
- Footer renders with all required sections (logo, divisions, contact, social, newsletter, legal)
- Social links have correct Lucide icons, aria-labels, and target="_blank"
- Footer newsletter form renders but doesn't submit (Phase 5 wiring)
- TextReveal component animates text with character stagger on scroll
- All animations wrapped in prefers-reduced-motion check
</verification>

<success_criteria>
The Header and Footer are visible on every page via layout.tsx. The Header scroll behavior is smooth and correct. The MenuOverlay opens/closes with premium SplitText character animations. The Footer displays all required content sections with scroll-reveal animations. TextReveal is available as a reusable animation wrapper for headings. SplitText is registered in gsap.ts. All builds pass.
</success_criteria>

<output>
After completion, create `.planning/phases/02-design-system/02-02-SUMMARY.md`
</output>
