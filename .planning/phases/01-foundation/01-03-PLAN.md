---
phase: 01-foundation
plan: 03
type: execute
wave: 3
depends_on:
  - "01-02"
files_modified:
  - src/app/[locale]/layout.tsx
  - src/styles/globals.css
  - src/lib/gsap.ts
  - src/components/animations/ScrollReveal.tsx
  - src/components/layout/Container.tsx
  - public/fonts/GlacialIndifference-Regular.woff2
  - public/fonts/GlacialIndifference-Bold.woff2
  - public/fonts/RedHatDisplay-Regular.woff2
  - src/app/[locale]/page.tsx
autonomous: true
requirements:
  - FNDN-03
  - FNDN-05
  - FNDN-06
must_haves:
  truths:
    - "Headings render in Glacial Indifference and subheadings in Red Hat Display with zero layout shift (CLS = 0)"
    - "Brand color tokens (Electric Violet, Cobalt Blue, Electric Mint, Black) are available as CSS custom properties and render in a test component"
    - "A test GSAP animation initialized via useGSAP() runs without console errors and cleans up on unmount"
    - "The responsive container scales from 320px to 2560px with correct padding at each breakpoint"
    - "Interactive elements have 48x48px minimum tap targets"
  artifacts:
    - path: "src/lib/gsap.ts"
      provides: "Centralized GSAP plugin registration"
      exports: ["gsap", "useGSAP", "ScrollTrigger"]
      contains: "registerPlugin"
    - path: "src/styles/globals.css"
      provides: "Brand tokens as CSS custom properties and Tailwind @theme inline"
      contains: "@theme inline"
    - path: "src/components/animations/ScrollReveal.tsx"
      provides: "Reusable scroll-triggered reveal animation wrapper"
      contains: "useGSAP"
    - path: "src/components/layout/Container.tsx"
      provides: "Responsive container with mobile-first breakpoints"
    - path: "public/fonts/GlacialIndifference-Regular.woff2"
      provides: "Heading font file"
    - path: "public/fonts/GlacialIndifference-Bold.woff2"
      provides: "Heading font bold file"
    - path: "public/fonts/RedHatDisplay-Regular.woff2"
      provides: "Subheading font file"
  key_links:
    - from: "src/app/[locale]/layout.tsx"
      to: "public/fonts/"
      via: "next/font/local with CSS variables on html element"
      pattern: "localFont|--font-glacial"
    - from: "src/styles/globals.css"
      to: "CSS custom properties"
      via: "@theme inline exposing brand tokens to Tailwind"
      pattern: "--color-electric-violet"
    - from: "src/components/animations/ScrollReveal.tsx"
      to: "src/lib/gsap.ts"
      via: "import gsap, useGSAP, ScrollTrigger"
      pattern: "from.*@/lib/gsap"
    - from: "src/lib/gsap.ts"
      to: "gsap + @gsap/react"
      via: "centralized registerPlugin"
      pattern: "gsap\\.registerPlugin"
---

<objective>
Load custom fonts (Glacial Indifference, Red Hat Display, Inter) with zero CLS, define brand color tokens as CSS custom properties exposed via TailwindCSS 4 @theme inline, set up centralized GSAP with SSR-safe useGSAP hook, and create responsive layout foundation.

Purpose: Fonts, colors, animations, and responsive layout are the visual infrastructure every component in Phases 2-8 depends on. Zero CLS fonts prevent PageSpeed penalties. Centralized GSAP prevents duplicate plugin registration. Brand tokens ensure visual consistency.
Output: Fonts loaded with fallbacks, brand tokens in CSS/Tailwind, GSAP centralized in lib/gsap.ts with a working ScrollReveal component, responsive Container component.
</objective>

<execution_context>
@/Users/mihaigrigore/.claude/get-shit-done/workflows/execute-plan.md
@/Users/mihaigrigore/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/1-RESEARCH.md
@.planning/phases/01-foundation/01-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Load custom fonts via next/font/local and define brand tokens in globals.css</name>
  <files>
    public/fonts/GlacialIndifference-Regular.woff2
    public/fonts/GlacialIndifference-Bold.woff2
    public/fonts/RedHatDisplay-Regular.woff2
    src/app/[locale]/layout.tsx
    src/styles/globals.css
  </files>
  <action>
1. **Source font files:**
   - Download Glacial Indifference (Regular + Bold) TTF from fontsquirrel.com or a trusted source
   - Convert to WOFF2 using `npx fonttools woff2-compress` or use an online converter (e.g., cloudconvert.com)
   - Download Red Hat Display Regular WOFF2 from fonts.google.com (use the Google Fonts helper or download the variable font and subset)
   - Place all files in `public/fonts/`:
     - `GlacialIndifference-Regular.woff2`
     - `GlacialIndifference-Bold.woff2`
     - `RedHatDisplay-Regular.woff2`

   **If WOFF2 conversion is not possible in the CLI:** Download the TTF files and place them in `public/fonts/` as `.ttf` — `next/font/local` supports TTF as well. Name them consistently. Document in SUMMARY that WOFF2 conversion should be done before production for optimal file size.

2. **Configure fonts in `src/app/[locale]/layout.tsx`:**
   - Import `localFont` from `next/font/local` and `Inter` from `next/font/google`
   - Define `glacialIndifference` with Regular (400) and Bold (700) variants:
     ```typescript
     const glacialIndifference = localFont({
       src: [
         { path: '../../../public/fonts/GlacialIndifference-Regular.woff2', weight: '400', style: 'normal' },
         { path: '../../../public/fonts/GlacialIndifference-Bold.woff2', weight: '700', style: 'normal' },
       ],
       variable: '--font-glacial',
       display: 'swap',
       adjustFontFallback: 'Arial',
     });
     ```
   - Define `redHatDisplay` with Regular variant:
     ```typescript
     const redHatDisplay = localFont({
       src: '../../../public/fonts/RedHatDisplay-Regular.woff2',
       variable: '--font-red-hat',
       display: 'swap',
       adjustFontFallback: 'Arial',
     });
     ```
   - Define Inter from Google Fonts:
     ```typescript
     const inter = Inter({ subsets: ['latin'], variable: '--font-inter', display: 'swap' });
     ```
   - Apply CSS variable classes to `<html>`:
     ```tsx
     <html lang={locale} className={`${glacialIndifference.variable} ${redHatDisplay.variable} ${inter.variable}`}>
     ```
   - CRITICAL: Preserve the existing `setRequestLocale()`, `generateStaticParams()`, `NextIntlClientProvider`, and `LocaleSwitcher` from Plan 01-02. Only ADD font configuration — do not remove i18n wiring.

   **NOTE:** The relative font paths (`../../../public/fonts/...`) are resolved from the layout file location (`src/app/[locale]/layout.tsx`). If the path is incorrect, `next/font/local` will throw a build error. Adjust paths if the directory structure differs.

3. **Update `src/styles/globals.css` with full brand tokens:**
   Replace the existing content (preserve the `@import "tailwindcss"` and `@import "tw-animate-css"` lines) and add:

   - `:root` block with raw CSS variables for all brand colors (Electric Violet #650CBE, Cobalt Blue #4500D0, Electric Mint #66F3A6, Black #262523, White #FFFFFF, Grey #D9D9D9, Burgundy #56151A)
   - shadcn semantic tokens in oklch (--background, --foreground, --primary mapped to Electric Violet, --secondary mapped to Cobalt Blue, --accent mapped to Electric Mint, etc.)
   - `@theme inline` block exposing brand colors to Tailwind utilities (bg-electric-violet, text-cobalt-blue, etc.), font families (--font-heading, --font-subheading, --font-body), responsive tap target spacing (--spacing-tap: 48px), and custom breakpoints (xs: 320px through 3xl: 2560px)
   - `@layer base` block setting default heading font-family to `var(--font-heading)`, body font to `var(--font-body)`, minimum 16px body font size, and border/outline defaults

   Reference: The exact CSS content is documented in the RESEARCH.md Pattern 3 and Pattern 5 sections.

4. Run `npm run build` to verify fonts load and tokens compile. Check the browser to confirm:
   - Headings render in Glacial Indifference
   - Body text renders in Inter
   - No visible layout shift on page load (CLS = 0)
  </action>
  <verify>
- `npm run build` exits with code 0
- `ls public/fonts/` shows at least 3 font files
- `grep "adjustFontFallback" src/app/\\[locale\\]/layout.tsx` returns a match
- `grep "--color-electric-violet" src/styles/globals.css` returns a match
- `grep "@theme inline" src/styles/globals.css` returns a match
- `grep "font-heading" src/styles/globals.css` returns a match
  </verify>
  <done>Custom fonts loaded via next/font/local with size-adjust fallbacks (zero CLS), brand color tokens defined as CSS custom properties and exposed to Tailwind via @theme inline, heading/body font families applied in base styles.</done>
</task>

<task type="auto">
  <name>Task 2: Set up centralized GSAP, ScrollReveal animation wrapper, and responsive Container</name>
  <files>
    src/lib/gsap.ts
    src/components/animations/ScrollReveal.tsx
    src/components/layout/Container.tsx
    src/app/[locale]/page.tsx
  </files>
  <action>
1. Install GSAP and Motion: `npm install gsap @gsap/react motion`

2. Create `src/lib/gsap.ts` — the single centralized GSAP registration point:
```typescript
'use client';

import gsap from 'gsap';
import { useGSAP } from '@gsap/react';
import { ScrollTrigger } from 'gsap/ScrollTrigger';

gsap.registerPlugin(useGSAP, ScrollTrigger);

gsap.defaults({
  ease: 'power2.out',
  duration: 0.6,
});

export { gsap, useGSAP, ScrollTrigger };
```

3. Create `src/components/animations/ScrollReveal.tsx` — SSR-safe scroll-triggered reveal wrapper:
```typescript
'use client';

import { useRef } from 'react';
import { gsap, useGSAP, ScrollTrigger } from '@/lib/gsap';

interface ScrollRevealProps {
  readonly children: React.ReactNode;
  readonly className?: string;
}

export function ScrollReveal({ children, className }: ScrollRevealProps): JSX.Element {
  const containerRef = useRef<HTMLDivElement>(null);

  useGSAP(
    () => {
      gsap.from(containerRef.current, {
        opacity: 0,
        y: 40,
        duration: 0.8,
        scrollTrigger: {
          trigger: containerRef.current,
          start: 'top 85%',
          toggleActions: 'play none none none',
        },
      });
    },
    { scope: containerRef }
  );

  return (
    <div ref={containerRef} className={className}>
      {children}
    </div>
  );
}
```

4. Create `src/components/layout/Container.tsx` — responsive container:
```typescript
interface ContainerProps {
  readonly children: React.ReactNode;
  readonly className?: string;
}

export function Container({ children, className }: ContainerProps): JSX.Element {
  return (
    <div className={`mx-auto w-full max-w-[1280px] px-4 sm:px-6 lg:px-8 ${className ?? ''}`}>
      {children}
    </div>
  );
}
```

5. Update `src/app/[locale]/page.tsx` to use all new infrastructure as a test page:
   - Import `Container`, `ScrollReveal`, and `Button`
   - Render a hero section with brand colors (bg-electric-violet, text-electric-mint)
   - Render a second section wrapped in `<ScrollReveal>` to verify GSAP animation works
   - Render brand token swatches showing all colors
   - Use `useTranslations` for text content
   - Ensure the page demonstrates: fonts, colors, GSAP animation, responsive container, tap targets

6. Run `npm run build` to verify everything compiles. Run `npm run dev` and verify:
   - ScrollReveal animation plays when scrolling the second section into view
   - No console errors related to GSAP or SSR
   - Brand colors render correctly
   - Fonts display correctly
   - Container is responsive across viewport sizes
  </action>
  <verify>
- `npm run build` exits with code 0
- `grep "registerPlugin" src/lib/gsap.ts` returns a match
- `grep "useGSAP" src/components/animations/ScrollReveal.tsx` returns a match
- `ls src/components/layout/Container.tsx` exists
- `grep "gsap" package.json` confirms GSAP is installed
- `grep "@gsap/react" package.json` confirms @gsap/react is installed
- `grep "motion" package.json` confirms motion is installed
- No console errors when running `npm run dev` and viewing the test page
  </verify>
  <done>GSAP centralized in lib/gsap.ts with ScrollTrigger registered once, ScrollReveal animation wrapper works with scroll-triggered fade-in, Container component provides responsive layout from 320px to 2560px, test page demonstrates all brand tokens, fonts, animations, and responsive behavior.</done>
</task>

</tasks>

<verification>
1. `npm run build` exits with code 0 and all pages remain static
2. Fonts render correctly: headings in Glacial Indifference, subheadings in Red Hat Display, body in Inter
3. No layout shift on page load (CLS = 0 achievable with adjustFontFallback)
4. Brand color tokens work: bg-electric-violet, text-electric-mint, etc. render correct colors
5. GSAP ScrollReveal animation plays on scroll without console errors
6. Container is responsive from 320px to 2560px with correct padding
7. All interactive elements meet 48x48px minimum tap targets
8. The test page demonstrates all infrastructure working together
</verification>

<success_criteria>
- Fonts loaded with size-adjust fallbacks preventing CLS
- Brand tokens available as both CSS custom properties and Tailwind utilities
- GSAP centralized — all components import from @/lib/gsap, not directly from gsap
- ScrollReveal animation works SSR-safely with proper cleanup
- Container scales responsively across all supported viewport widths
- Build passes with zero errors
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-03-SUMMARY.md`
</output>
